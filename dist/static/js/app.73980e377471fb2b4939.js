webpackJsonp([1],{"7zck":function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),n=s("mtWM"),o=s.n(n),i={name:"HelloWorld",data:function(){return{msg:"Welcome to ClassUp",input:{user:"",password:""},show_it:!0,alert_type:"",alert_message:"",response:"",showDismissibleAlert:!1}},methods:{dismiss:function(){this.showDismissibleAlert=!1},login:function(){var e=this;if(""!=this.input.user&&""!=this.input.password){console.log("username and password have been specified");var t=this.$store.getters.get_server_ip;console.log(t);var s=t.concat("/auth/login/");o()({method:"POST",url:s,data:this.input}).then(function(t){e.response=t.data,console.log(e.response),"success"==t.data.outcome?(e.show_it=!1,e.alert_type="success",e.showDismissibleAlert=!0,e.alert_message=t.data.message,e.$store.dispatch("set_logged_status",!0),e.$store.dispatch("set_user",e.input.user),e.$store.dispatch("set_user_name",t.data.user_name),e.$store.dispatch("set_user_type",t.data.user_type),e.$store.dispatch("set_school_name",t.data.school_name),e.$store.dispatch("set_id",t.data.school_id),e.$router.push("/dashboard")):(e.showDismissibleAlert=!0,e.alert_message=t.data.message,e.alert_type="error",e.$store.dispatch("set_logged_status",!1),e.$store.dispatch("set_user","unknown"),e.$store.dispatch("set_user_name",""),e.$store.dispatch("set_user_type","unknown"),e.$store.dispatch("set_school_name","ClassUp"),e.$store.dispatch("set_id",0))},function(t){e.alert_type="error",e.alert_message="an error occured in contacting the server",console.log(e.alert_message),console.error(t.response),e.$emit("authenticated",!1)})}else this.alert_type="error",this.alert_message="A username and password must be present",console.log(this.alert_message),this.showDismissibleAlert=!0,this.dismissCountDown=this.dismissSecs},get_logged_status:function(){return this.$store.getters.get_logged_status}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.show_it?s("v-app",{attrs:{id:"hello"}},[s("div",{staticClass:"hello"},[s("v-content",[s("v-container",[s("v-layout",{attrs:{"align-center":"","justify-center":""}},[s("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[s("img",{attrs:{src:"https://storage.cloud.google.com/classup/classup2/static/prod/images/ClassUp_mobile_logo.png?_ga=2.134540216.-83250823.1538650499"}}),e._v(" "),s("h1",[e._v(e._s(e.msg))]),e._v(" "),s("h2",[e._v("Please Login")]),e._v(" "),s("v-card",{staticClass:"elevation-12"},[s("v-card-text",[s("v-form",[s("v-text-field",{attrs:{"prepend-icon":"person",label:"Login",type:"text"},on:{focus:function(t){return e.dismiss()}},model:{value:e.input.user,callback:function(t){e.$set(e.input,"user",t)},expression:"input.user"}}),e._v(" "),s("v-text-field",{attrs:{"prepend-icon":"lock",label:"Password",id:"password",type:"password"},on:{focus:function(t){return e.dismiss()}},model:{value:e.input.password,callback:function(t){e.$set(e.input,"password",t)},expression:"input.password"}})],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{on:{click:function(t){return e.login()}}},[e._v("Login")])],1)],1),e._v(" "),s("v-alert",{attrs:{value:e.showDismissibleAlert,type:e.alert_type}},[e._v(e._s(e.alert_message))])],1)],1)],1)],1)],1)]):e._e()},staticRenderFns:[]};var l={name:"App",components:{hello:s("VU/8")(i,r,!1,function(e){s("ZSVR")},"data-v-164bafb0",null).exports},data:function(){return{waiting:!1,drawer:{open:!0,clipped:!1,fixed:!1,permanent:!1,mini:!1},toolbar:{fixed:!0,clippedLeft:!1},footer:{fixed:!0,clippedLeft:!0},student_management_items:[{title:"Add Student",action:this.add_student},{title:"Update Student",action:this.update_student}],fee_items:[{title:"Take Fee",action:this.student_search},{title:"Cancel Fee",action:this.correction},{title:"Defaulter Report",action:this.defaulter_report}],report_items:[{title:"Monthly Attendance of Class"}],right:null}},methods:{toggleDrawer:function(){this.drawer.permanent?(this.drawer.permanent=!this.drawer.permanent,this.drawer.clipped=!0,this.toolbar.clippedLeft=!0):this.drawer.open=!this.drawer.open},logout:function(){this.drawer.open=!1,this.$store.dispatch("set_logged_status",!1),this.$store.dispatch("set_user","unknown"),this.$store.dispatch("set_user_type","unknown"),this.$store.dispatch("set_school_name","ClassUp"),this.$store.dispatch("set_id",0),this.$router.replace("/")},student_search:function(){this.$store.dispatch("set_coming_status","fee_payment"),this.$router.replace("/student_search")},add_student:function(){this.$store.dispatch("set_coming_from","add_student"),this.$router.replace("/add_student")},update_student:function(){this.$store.dispatch("set_coming_status","update_student"),this.$router.replace("/student_search")},defaulter_report:function(){var e=this;alert("Report will be downloaded. This can take some time"),e.waiting=!0;var t=this.$store.getters.get_server_ip,s=this.$store.getters.get_school_id,a=t.concat("/fee_processing/defaulter_list/",s,"/");o.a.get(a,{headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},responseType:"arraybuffer"}).then(function(t){console.log(t);var s=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=s;a.setAttribute("download","fee_defaulter_report.xlsx"),document.body.appendChild(a),a.click(),e.waiting=!1,confirm("Fee Defaulter Report downloaded")}).catch(function(e){console.log(e)}).then(function(){})},correction:function(){this.$store.dispatch("set_coming_status","correction"),this.$router.replace("/student_search")}},computed:{get_title:function(){return this.$store.getters.get_school_name},get_user_name:function(){return this.$store.getters.get_user_name},get_logged_status:function(){return this.$store.getters.get_logged_status}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("div",{attrs:{id:"app"}},[e.get_logged_status?s("v-toolbar",{attrs:{app:"",fixed:e.toolbar.fixed,"clipped-left":e.toolbar.clippedLeft}},[s("v-toolbar-side-icon",{attrs:{disabled:!e.get_logged_status},on:{click:function(t){return t.stopPropagation(),e.toggleDrawer(t)}}}),e._v(" "),s("v-toolbar-title",[e._v(e._s(e.get_title))]),e._v(" "),s("v-spacer"),e._v(" "),s("v-toolbar-items",[s("v-chip",{attrs:{color:"indigo","text-color":"white"}},[s("v-avatar",[s("v-icon",[e._v("account_circle")])],1),e._v("\n          "+e._s(e.get_user_name)+"\n        ")],1),e._v(" "),s("v-btn",{attrs:{flat:"",disabled:!e.get_logged_status},on:{click:function(t){return e.logout()}}},[e._v("Log Out")])],1)],1):e._e(),e._v(" "),e.get_logged_status?s("v-navigation-drawer",{attrs:{app:"",clipped:e.drawer.clipped,fixed:e.drawer.fixed,permanent:e.drawer.permanent,"mini-variant":e.drawer.mini},model:{value:e.drawer.open,callback:function(t){e.$set(e.drawer,"open",t)},expression:"drawer.open"}},[s("v-divider"),e._v("`\n      "),s("v-list",{staticClass:"pt-0",attrs:{dense:""}},[s("v-list-group",{attrs:{"prepend-icon":"",value:"true"},scopedSlots:e._u([{key:"activator",fn:function(){return[s("v-list-tile",[s("v-list-tile-title",[e._v("Student Management")])],1)]},proxy:!0}])},[e._v(" "),e._l(e.student_management_items,function(t){return s("v-list-tile",{key:t.title,on:{click:t.action}},[s("v-list-tile-action",[s("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)})],2),e._v(" "),s("v-list-group",{attrs:{"prepend-icon":"",value:"true"},scopedSlots:e._u([{key:"activator",fn:function(){return[s("v-list-tile",[s("v-list-tile-title",[e._v("Fees Management")])],1)]},proxy:!0}])},[e._v(" "),e._l(e.fee_items,function(t){return s("v-list-tile",{key:t.title,on:{click:t.action}},[s("v-list-tile-action",[s("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)})],2),e._v(" "),s("v-list-group",{attrs:{"prepend-icon":"",value:"true"},scopedSlots:e._u([{key:"activator",fn:function(){return[s("v-list-tile",[s("v-list-tile-title",[e._v("Reports")])],1)]},proxy:!0}])},[e._v(" "),e._l(e.report_items,function(t){return s("v-list-tile",{key:t.title,on:{click:t.action}},[s("v-list-tile-action",[s("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)})],2)],1)],1):e._e(),e._v(" "),[s("div",{staticClass:"text-xs-center"},[e.waiting?s("v-progress-circular",{attrs:{size:70,width:7,color:"purple",indeterminate:""}}):e._e()],1)],e._v(" "),s("hello"),e._v(" "),s("v-footer",{attrs:{app:"",fixed:e.footer.fixed,"clipped-left":e.footer.clippedLeft}},[s("span",{staticClass:"caption mx-3"},[e._v("Â© 2019, EmergeTech Mobile Products & Services Pvt Ltd")])]),e._v(" "),s("router-view")],2)])},staticRenderFns:[]};var _=s("VU/8")(l,c,!1,function(e){s("uKVr")},"data-v-5cb4602e",null).exports,d=s("/ocq"),u={render:function(){var e=this.$createElement;return(this._self._c||e)("v-app",{attrs:{id:"dashboard"}})},staticRenderFns:[]},m=s("VU/8")({name:"Dashboard"},u,!1,null,null,null).exports,h=s("zoC0"),f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-content",{staticClass:"ma-0 pa-0 ta-0"},[s("h2",[e._v("Fee Details")]),e._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{"d-flex":"",xs6:"","order-xs5":"","offset-sm3":""}},[s("v-layout",{attrs:{column:""}},[s("v-flex",{attrs:{"d-flex":"",xs6:""}},[s("h5",[e._v("Student:")]),e._v(" "),s("h3",[e._v(e._s(e.student_name))]),e._v(" "),s("h5",[e._v("Class:")]),e._v(" "),s("h3",[e._v(e._s(e.the_class))]),e._v(" "),s("h5",[e._v("Reg/Adm/Sch No")]),e._v(" "),s("h3",[e._v(e._s(e.student_erp_id))]),e._v(" "),s("h5",[e._v("Parent")]),e._v(" "),s("h3",[e._v(e._s(e.parent))])])],1)],1)],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs6:"","order-xs7":"","offset-sm3":""}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.heads,"hide-actions":"true",loading:"true"},scopedSlots:e._u([{key:"items",fn:function(t){return[s("tr",{on:{click:function(s){return e.click(t.item)}}},[s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.head))]),e._v(" "),s("td",{staticClass:"text-xs-left"},[s("v-edit-dialog",{attrs:{"return-value":t.item.amount,large:"",lazy:"",persistent:""},on:{"update:returnValue":function(s){return e.$set(t.item,"amount",s)},"update:return-value":function(s){return e.$set(t.item,"amount",s)},save:function(s){return e.update_fee(t.item)}},scopedSlots:e._u([{key:"input",fn:function(){return[s("v-text-field",{attrs:{disabled:"Transportation Fee"!==t.item.head,label:"Edit","single-line":"",counter:"",autofocus:""},model:{value:t.item.amount,callback:function(s){e.$set(t.item,"amount",s)},expression:"props.item.amount"}})]},proxy:!0}],!0)},[s("div",[e._v(e._s(t.item.amount))])])],1),e._v(" "),s("td",{staticClass:"text-xs-left"},[s("v-edit-dialog",{attrs:{"return-value":t.item.discount_perc,large:"",lazy:"",persistent:""},on:{"update:returnValue":function(s){return e.$set(t.item,"discount_perc",s)},"update:return-value":function(s){return e.$set(t.item,"discount_perc",s)},save:function(s){return e.apply_discount(t.item)}},scopedSlots:e._u([{key:"input",fn:function(){return[s("v-text-field",{attrs:{label:"Edit","single-line":"",counter:"",autofocus:""},model:{value:t.item.discount_perc,callback:function(s){e.$set(t.item,"discount_perc",s)},expression:"props.item.discount_perc"}})]},proxy:!0}],!0)},[s("div",[e._v(e._s(t.item.discount_perc))])])],1),e._v(" "),s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.discount_amt))]),e._v(" "),s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.net_payable))])])]}}])})],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs7:"","order-xs10":"","offset-sm3":""}},[s("v-form",[s("v-container",{attrs:{fluid:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{"d-flex":"",xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Due this Month/Qtr",disabled:"true"},model:{value:e.due_this_term,callback:function(t){e.due_this_term=t},expression:"due_this_term"}})],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Previous Due",disabled:"true"},model:{value:e.previous_due,callback:function(t){e.previous_due=t},expression:"previous_due"}})],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Paid Till Date",disabled:"true"},on:{focus:function(t){return e.dismiss()}},model:{value:e.paid_till_date,callback:function(t){e.paid_till_date=t},expression:"paid_till_date"}})],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Delay",disabled:"true"},model:{value:e.delay,callback:function(t){e.delay=t},expression:"delay"}})],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Penalty"},on:{focus:function(t){return e.dismiss()}},model:{value:e.late_fee,callback:function(t){e.late_fee=t},expression:"late_fee"}})],1)],1),e._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Other/One time Charges"},on:{focus:function(t){return e.dismiss()}},model:{value:e.one_time,callback:function(t){e.one_time=t},expression:"one_time"}})],1),e._v(" "),s("v-flex",{attrs:{xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Waivers"},on:{focus:function(t){return e.dismiss()}},model:{value:e.waiver,callback:function(t){e.waiver=t},expression:"waiver"}})],1),e._v(" "),s("v-flex",{attrs:{xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Net Payable",disabled:"true"},model:{value:e.net_payable,callback:function(t){e.net_payable=t},expression:"net_payable"}})],1),e._v(" "),s("v-flex",{attrs:{xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Actual Paid"},on:{focus:function(t){return e.dismiss()}},model:{value:e.actual_paid,callback:function(t){e.actual_paid=t},expression:"actual_paid"}})],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Remaining Balance",disabled:"true"},model:{value:e.balance,callback:function(t){e.balance=t},expression:"balance"}})],1)],1),e._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs4:"",sm4:"",md6:""}},[s("v-radio-group",{attrs:{row:""},on:{click:function(t){return e.dismiss()}},model:{value:e.payment_mode,callback:function(t){e.payment_mode=t},expression:"payment_mode"}},[s("v-radio",{attrs:{label:"Cash",value:"cash"}}),e._v(" "),s("v-radio",{attrs:{label:"Cheque",value:"cheque"}}),e._v(" "),s("v-radio",{attrs:{label:"Card",value:"card"}}),e._v(" "),s("v-radio",{attrs:{label:"Net Banking",value:"netbanking"}})],1)],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:"",md2:""}},[s("v-text-field",{attrs:{label:"Cheque No"},on:{focus:function(t){return e.dismiss()}},model:{value:e.cheque_no,callback:function(t){e.cheque_no=t},expression:"cheque_no"}})],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:"",md2:""}},[s("v-text-field",{attrs:{label:"Bank"},on:{focus:function(t){return e.dismiss()}},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}})],1)],1),e._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-btn",{attrs:{color:"success"},on:{click:e.fee_history}},[e._v("Download Payment History")]),e._v(" "),s("v-btn",{attrs:{color:"success"},on:{click:e.validate_fee}},[e._v("Accept Fee")])],1),e._v(" "),s("v-alert",{attrs:{value:e.showDismissibleAlert,type:e.alert_type}},[e._v(e._s(e.alert_message))])],1)],1)],1),e._v(" "),s("v-dialog",{attrs:{persistent:"","max-width":"360"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v(e._s(e.caption))]),e._v(" "),s("v-card-text",[e._v(e._s(e.alert_message))]),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(t){return e.process_fee()}}},[e._v("OK")]),e._v(" "),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(t){e.confirm=!1}}},[e._v("Cancel")])],1)],1)],1)],1)],1)},staticRenderFns:[]},v=s("VU/8")(h.a,f,!1,null,null,null).exports,p={name:"StudentSearch",data:function(){return{show_search_criteria:!0,show_student_list:!1,loader:null,loading:!1,reg_no:"",first_name:"",last_name:"",the_class:"",class_list:[],students:[],alert_type:"",alert_message:"",showDismissibleAlert:!1,headers:[{text:"Student Name",align:"left",sortable:!1,value:"name"},{text:"Reg/Adm/Sch Number",value:"reg_no"},{text:"Class",value:"the_class"},{text:"Parent",value:"parent"}]}},mounted:function(){var e=this,t=this.$store.getters.get_school_id,s=this.$store.getters.get_server_ip.concat("/academics/class_list/",t,"/");o.a.get(s).then(function(t){e.class_list=t.data;for(var s=0;s<t.data.length;s++)e.class_list[s]=t.data[s].standard;console.log(e.class_list)}).catch(function(e){console.log(e)})},methods:{search:function(){var e=this,t=!0;if(""==this.reg_no&&""==this.first_name&&(this.alert_message="Search criteria provided is NOT Enough.",this.showDismissibleAlert=!0,t=!1),""!=this.first_name&&""==this.reg_no&&""==this.the_class&&(this.alert_message="Please specify Class",this.showDismissibleAlert=!0,t=!1),t){var s=this.$store.getters.get_server_ip,a=this.$store.getters.get_school_id,n=s.concat("/student/list/",a,"/","in_params","/","in_params");o.a.get(n,{params:{reg_no:this.reg_no,first_name:this.first_name,last_name:this.last_name,the_class:this.the_class}}).then(function(t){if(0==t.data.length)e.alert_message="Student not found. Please change the search criteria and try again",e.showDismissibleAlert=!0,e.alert_type="error";else{e.show_search_criteria=!1;for(var s=0;s<t.data.length;s++){var a={};a.reg_no=t.data[s].student_erp_id,a.name=t.data[s].fist_name+" "+t.data[s].last_name,a.the_class=t.data[s].current_class+"-"+t.data[s].current_section,a.parent=t.data[s].parent,a.adm_fee=t.data[s].adm_fee,console.log(a),e.students.push(a)}console.log(e.students),e.show_student_list=!0}}).catch(function(e){console.log(e)}).then(function(){})}console.log(this.reg_no)},dismiss:function(){this.showDismissibleAlert=!1},showAlert:function(e){if(!event.target.classList.contains("btn__content")){var t=this.$store.getters.get_coming_from;if(console.log(t),"fee_payment"==t)confirm("Are you sure you want to process the fees for "+e.name+" ("+e.reg_no+")?")&&(this.$store.dispatch("set_student_id",e.reg_no),this.$store.dispatch("set_student_name",e.name),this.$store.dispatch("set_parent",e.parent),this.$router.replace("/fee_payment"));if("correction"==t)if(confirm("Are you sure you want to do correction for "+e.name+" ("+e.reg_no+")?")){this.$store.dispatch("set_student_id",e.reg_no),this.$store.dispatch("set_student_name",e.name);var s=e.current_class;console.log(s);var a=e.current_section;console.log(a),this.$store.dispatch("set_student_class",e.the_class),this.$store.dispatch("set_parent",e.parent),this.$router.replace("/correction")}}}}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-content",[e.show_search_criteria?s("v-form",[s("v-container",{attrs:{fluid:""}},[s("h2",[e._v("Student Search")]),e._v(" "),s("v-layout",{attrs:{xs4:"",row:"",wrap:"","justify-center":""}},[s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Reg/Adm/Sch Number"},on:{focus:function(t){return e.dismiss()}},model:{value:e.reg_no,callback:function(t){e.reg_no=t},expression:"reg_no"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"First Name"},on:{focus:function(t){return e.dismiss()}},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Surname/Last Name"},on:{focus:function(t){return e.dismiss()}},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-select",{attrs:{items:e.class_list,label:"Class/Standard"},on:{focus:function(t){return e.dismiss()}},model:{value:e.the_class,callback:function(t){e.the_class=t},expression:"the_class"}})],1)],1),e._v(" "),s("v-layout",{attrs:{xs4:"",row:"",wrap:"","justify-space-around":""}},[s("div",{staticClass:"text-xs-center"},[s("v-btn",{attrs:{loading:e.loading,disabled:e.loading,color:"info"},on:{click:[function(t){e.loader="loading"},function(t){return e.search()}]}},[e._v("\n              Search\n              "),s("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[s("v-icon",{attrs:{light:""}},[e._v("cached")])],1)])],1),e._v(" "),s("v-alert",{attrs:{value:e.showDismissibleAlert,type:e.alert_type}},[e._v(e._s(e.alert_message))])],1)],1)],1):e._e(),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs8:"","order-xs5":"","offset-sm2":""}},[e.show_student_list?s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.students},scopedSlots:e._u([{key:"items",fn:function(t){return[s("tr",{on:{click:function(s){return e.showAlert(t.item)}}},[s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.name))]),e._v(" "),s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.reg_no))]),e._v(" "),s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.the_class))]),e._v(" "),s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.parent))])])]}}])}):e._e()],1)],1)],1)},staticRenderFns:[]};var b,x=s("VU/8")(p,g,!1,function(e){s("dU/q")},null,null).exports,y=s("bOdI"),w=s.n(y),k={name:"Correction",data:function(){var e;return e={school_id:"",student_id:"",reg_no:"",the_class:"",student_name:"",parent:"",alert_message:"",show_payment_history:!0,show_payment_details:!1,receipt_corrected:"",penalty:"",one_time:"",discount:"",amount_paid:"",payment_history:[],alert_type:""},w()(e,"alert_message",""),w()(e,"showDismissibleAlert",!1),w()(e,"headers",[{text:"Date",align:"left",sortable:!1,value:"date"},{text:"Receipt Number",value:"receipt_number"},{text:"Amount Paid",value:"amount_paid"}]),e},mounted:function(){var e=this,t=this.$store.getters.get_school_id;this.$store.getters.get_student_id;this.student_name=this.$store.getters.get_student_name,this.parent=this.$store.getters.get_parent,e.reg_no=this.$store.getters.get_student_id,this.the_class=this.$store.getters.get_student_class;var s=this.$store.getters.get_server_ip.concat("/fee_processing/get_fee_history/");o.a.get(s,{params:{school_id:t,reg_no:e.reg_no,download:"false"}}).then(function(t){if(0==t.data.length)e.alert_message="No payment associated with this student could be found.",e.showDismissibleAlert=!0,e.alert_type="error";else{e.show_payment_history=!0,e.show_payment_details=!1;for(var s=0;s<t.data.length;s++){var a={};a.date=t.data[s].date,a.receipt_number=t.data[s].receipt_number,a.amount=t.data[s].amount,a.fine=t.data[s].fine,a.one_time=t.data[s].one_time,a.discount=t.data[s].discount,e.payment_history.push(a)}console.log(e.payment_history)}}).catch(function(e){console.log(e)})},methods:{search:function(){var e=this,t=!0;if(""==this.reg_no&&""==this.first_name&&(this.alert_message="Search criteria provided is NOT Enough.",this.showDismissibleAlert=!0,t=!1),""!=this.first_name&&""==this.reg_no&&""==this.the_class&&(this.alert_message="Please specify Class",this.showDismissibleAlert=!0,t=!1),t){var s=this.$store.getters.get_server_ip,a=this.$store.getters.get_school_id,n=s.concat("/student/list/",a,"/","in_params","/","in_params");o.a.get(n,{params:{reg_no:this.reg_no,first_name:this.first_name,last_name:this.last_name,the_class:this.the_class}}).then(function(t){if(0==t.data.length)e.alert_message="Student not found. Please change the search criteria and try again",e.showDismissibleAlert=!0,e.alert_type="error";else{e.show_search_criteria=!1;for(var s=0;s<t.data.length;s++){var a={};a.reg_no=t.data[s].student_erp_id,a.name=t.data[s].fist_name+" "+t.data[s].last_name,a.the_class=t.data[s].current_class+"-"+t.data[s].current_section,a.parent=t.data[s].parent,a.adm_fee=t.data[s].adm_fee,console.log(a),e.students.push(a)}console.log(e.students),e.show_student_list=!0}}).catch(function(e){console.log(e)}).then(function(){})}console.log(this.reg_no)},dismiss:function(){this.showDismissibleAlert=!1},showAlert:function(e){event.target.classList.contains("btn__content")||confirm("Are you sure you want to do correction for "+e.receipt_number+" (date: "+e.date+", amount: "+e.amount+")?")&&(this.show_payment_history=!1,this.show_payment_details=!0,console.log(e.amount),this.receipt_corrected=e.receipt_number,this.penalty=e.fine,this.one_time=e.one_time,this.discount=e.discount,this.amount_paid=e.amount)},correction:function(){if(confirm("Are you sure you want to apply this correction?")){var e,t=this.$store.getters.get_server_ip,s=this.$store.getters.get_school_id,a=t.concat("/fee_processing/correct_fee/",s,"/");o.a.post(a,(e={receipt_corrected:this.receipt_corrected,penalty:this.penalty,due_this_term:this.due_this_term,one_time:this.one_time,fine:this.late_fee},w()(e,"one_time",this.one_time),w()(e,"discount",this.discount),w()(e,"amount_paid",this.amount_paid),e)).then(function(e){console.log(e),confirm("Fees successfully corrected"),self.$router.replace("/student_search")}).catch(function(e){console.log(e)}).then(function(){})}}}},A={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-container",{attrs:{fluid:""}},[s("v-content",[e.show_payment_history?s("h2",[e._v("Fee Payment History")]):e._e(),e._v(" "),e.show_payment_history?s("v-layout",{attrs:{"justify-center":""}},[s("v-flex",{attrs:{"d-flex":"",xs6:""}},[s("v-layout",{attrs:{column:""}},[s("v-flex",{attrs:{"d-flex":"",xs6:""}},[s("h5",[e._v("Student:")]),e._v(" "),s("h3",[e._v(e._s(e.student_name))]),e._v(" "),s("h5",[e._v("Class:")]),e._v(" "),s("h3",[e._v(e._s(e.the_class))]),e._v(" "),s("h5",[e._v("Reg/Adm/Sch No")]),e._v(" "),s("h3",[e._v(e._s(e.reg_no))]),e._v(" "),s("h5",[e._v("Parent")]),e._v(" "),s("h3",[e._v(e._s(e.parent))])])],1)],1)],1):e._e(),e._v(" "),s("v-layout",{attrs:{"justify-center":""}},[s("v-flex",{attrs:{"d-flex":"",xs6:""}},[e.show_payment_history?s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.payment_history},scopedSlots:e._u([{key:"items",fn:function(t){return[s("tr",{on:{click:function(s){return e.showAlert(t.item)}}},[s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.date))]),e._v(" "),s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.receipt_number))]),e._v(" "),s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.amount))]),e._v(" "),s("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.parent))])])]}}])}):e._e()],1)],1)],1)],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs7:"","order-xs10":"","offset-sm3":""}},[e.show_payment_details?s("v-form",[s("h3",[e._v("Please Correct")]),e._v(" "),s("v-container",{attrs:{fluid:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{"d-flex":"",xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Penalty"},model:{value:e.penalty,callback:function(t){e.penalty=t},expression:"penalty"}})],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Other/One Time"},model:{value:e.one_time,callback:function(t){e.one_time=t},expression:"one_time"}})],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Discount"},on:{focus:function(t){return e.dismiss()}},model:{value:e.discount,callback:function(t){e.discount=t},expression:"discount"}})],1),e._v(" "),s("v-flex",{attrs:{"d-flex":"",xs2:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Amount Paid"},on:{focus:function(t){return e.dismiss()}},model:{value:e.amount_paid,callback:function(t){e.amount_paid=t},expression:"amount_paid"}})],1)],1),e._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-btn",{attrs:{color:"success"},on:{click:e.correction}},[e._v("Update Payment")]),e._v(" "),s("v-btn",{attrs:{color:"success"},on:{click:e.validate_fee}},[e._v("Cancel")])],1),e._v(" "),s("v-alert",{attrs:{value:e.showDismissibleAlert,type:e.alert_type}},[e._v(e._s(e.alert_message))])],1)],1):e._e()],1)],1)},staticRenderFns:[]},S=s("VU/8")(k,A,!1,null,null,null).exports,D={name:"FeePayment",data:function(){return{date:null,menu:!1,modal:!1,reg_no:"",first_name:"",last_name:"",the_class:"",section:"",gender:"",parent:"",alert_message:"",dob:"",father_name:"",email:"",father_mobile:"",mother_name:"",mother_mobile:"",address:"",adhar:"",blood_group:"",house:"",father_occupation:"",mother_occupation:"",transport:"",bus_rout:"",bus_stop:"",class_list:[],section_list:[],showDismissibleAlert:!1,alert_type:"error",confirm:!1,caption:"",allow_edit:!1,max25chars:function(e){return e.length<=30||"Input too long!"}}},computed:{},mounted:function(){var e=this,t=this.$store.getters.get_school_id,s=this.$store.getters.get_server_ip,a=s.concat("/academics/class_list/",t,"/");o.a.get(a).then(function(t){e.class_list=t.data;for(var s=0;s<t.data.length;s++)e.class_list[s]=t.data[s].standard;console.log(e.class_list)}).catch(function(e){console.log(e)});var n=s.concat("/academics/section_list/",t,"/");o.a.get(n).then(function(t){e.section_list=t.data;for(var s=0;s<t.data.length;s++)e.section_list[s]=t.data[s].section;console.log(e.section_list)}).catch(function(e){console.log(e)})},methods:(b={add_student:function(){},save_dob:function(){console.log("saving dob...")},validate_entries:function(){return""==this.reg_no?(this.alert_message="Please enter Registration/Admission/Scholar Number",void(this.showDismissibleAlert=!0)):""==this.first_name?(this.alert_message="Please enter First Name",void(this.showDismissibleAlert=!0)):""==this.last_name?(this.alert_message="Please enter Last Name",void(this.showDismissibleAlert=!0)):""==this.the_class?(this.alert_message="Please Select Class in which student is admitted",void(this.showDismissibleAlert=!0)):""==this.section?(this.alert_message="Please Select Section in which student is admitted",void(this.showDismissibleAlert=!0)):""==this.gender?(this.alert_message="Please Select Gender)",void(this.showDismissibleAlert=!0)):""==this.dob?(this.alert_message="Please enter Student's Date of Birth (DOB)",void(this.showDismissibleAlert=!0)):""==this.father_name?(this.alert_message="Please enter Father's name",void(this.showDismissibleAlert=!0)):""==this.father_mobile?(this.alert_message="Please enter Father's mobile number (10 digits)",void(this.showDismissibleAlert=!0)):""==this.mother_name?(this.alert_message="Please enter Mother's name",void(this.showDismissibleAlert=!0)):""==this.transport?(this.alert_message="Please mention whether Bus user or Walker",void(this.showDismissibleAlert=!0)):""==this.address?(this.alert_message="Please enter Address",void(this.showDismissibleAlert=!0)):(this.caption="Confirm Student Addition",this.alert_message="Are you sure you want to Add this Student ",void(this.confirm=!0))},close:function(){console.log("Dialog closed")}},w()(b,"add_student",function(){var e=this;console.log("inside add student"),this.confirm=!1;var t=this.$store.getters.get_school_id;console.log(t);var s=this.$store.getters.get_server_ip,a=this.$store.getters.get_logged_user,n=s.concat("/student/add_student_web/");o.a.post(n,{school_id:t,sender:a,reg_no:this.reg_no,first_name:this.first_name,last_name:this.last_name,the_class:this.the_class,section:this.section,gender:this.gender,dob:this.dob,adhar:this.adhar,house:this.house,blood_group:this.blood_group,father_name:this.father_name,father_mobile:this.father_mobile,email:this.email,mother_name:this.mother_name,mother_mobile:this.mother_mobile,father_occupation:this.father_occupation,mother_occupation:this.mother_occupation,transport:this.transport,bus_rout:this.bus_rout,bus_stop:this.bus_stop,address:this.address}).then(function(t){if(console.log(t),"success"!=t.data.status)return e.showDismissibleAlert=!0,void(e.alert_message=t.data.message);confirm("student successfully added")}).catch(function(e){console.log(e)}).then(function(){})}),w()(b,"dismiss",function(){this.showDismissibleAlert=!1}),b)},$={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-content",[s("v-form",[s("v-container",{attrs:{fluid:""}},[s("h2",[e._v("Add Student")]),e._v(" "),s("v-layout",{attrs:{xs4:"",row:"",wrap:"","justify-center":""}},[s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Reg/Adm/Sch No"},on:{focus:function(t){return e.dismiss()}},model:{value:e.reg_no,callback:function(t){e.reg_no=t},expression:"reg_no"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"First Name"},on:{focus:function(t){return e.dismiss()}},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Surname/Last Name"},on:{focus:function(t){return e.dismiss()}},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-select",{attrs:{items:e.class_list,label:"Class/Standard"},on:{focus:function(t){return e.dismiss()}},model:{value:e.the_class,callback:function(t){e.the_class=t},expression:"the_class"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-select",{attrs:{items:e.section_list,label:"Section"},on:{focus:function(t){return e.dismiss()}},model:{value:e.section,callback:function(t){e.section=t},expression:"section"}})],1)],1),e._v(" "),s("v-layout",{attrs:{xs6:"",row:"",wrap:"","justify-center":""}},[s("v-flex",{attrs:{xs6:"",sm6:"",md3:"","justify-space-between":""}},[s("v-radio-group",{attrs:{row:""},on:{click:function(t){return e.dismiss()}},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},[s("v-radio",{attrs:{label:"Male",value:"male"}}),e._v(" "),s("v-radio",{attrs:{label:"Female",value:"female"}}),e._v(" "),s("v-radio",{attrs:{label:"Other",value:"other"}})],1)],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:"","justify-end":""}},[s("v-menu",{attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"max-width":"290px","min-width":"290px"},model:{value:e.dob_menu,callback:function(t){e.dob_menu=t},expression:"dob_menu"}},[s("v-text-field",{attrs:{slot:"activator",label:"Date of Birth(DOB)","prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}}),e._v(" "),s("v-date-picker",{attrs:{title:"Date of Birth(DOB)","no-title":"",scrollable:"",actions:""},scopedSlots:e._u([{key:"default",fn:function(e){e.save_dob,e.cancel_dob}}]),model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}})],1)],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Adhar No"},on:{focus:function(t){return e.dismiss()}},model:{value:e.adhar,callback:function(t){e.adhar=t},expression:"adhar"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Blood Group"},on:{focus:function(t){return e.dismiss()}},model:{value:e.blood_group,callback:function(t){e.blood_group=t},expression:"blood_group"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md1:""}},[s("v-text-field",{attrs:{label:"House"},on:{focus:function(t){return e.dismiss()}},model:{value:e.house,callback:function(t){e.house=t},expression:"house"}})],1)],1),e._v(" "),s("v-layout",{attrs:{xs4:"",row:"",wrap:"","justify-center":""}},[s("v-flex",{attrs:{xs3:"",sm3:"",md2:""}},[s("v-text-field",{attrs:{label:"Father Name"},on:{focus:function(t){return e.dismiss()}},model:{value:e.father_name,callback:function(t){e.father_name=t},expression:"father_name"}})],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:"",md2:""}},[s("v-text-field",{attrs:{label:"Email"},on:{focus:function(t){return e.dismiss()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:"",md2:""}},[s("v-text-field",{attrs:{label:"Father Mob"},on:{focus:function(t){return e.dismiss()}},model:{value:e.father_mobile,callback:function(t){e.father_mobile=t},expression:"father_mobile"}})],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:"",md2:""}},[s("v-text-field",{attrs:{label:"Mother Name"},on:{focus:function(t){return e.dismiss()}},model:{value:e.mother_name,callback:function(t){e.mother_name=t},expression:"mother_name"}})],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:"",md2:""}},[s("v-text-field",{attrs:{label:"Mother Mob"},on:{focus:function(t){return e.dismiss()}},model:{value:e.mother_mobile,callback:function(t){e.mother_mobile=t},expression:"mother_mobile"}})],1)],1),e._v(" "),s("v-layout",{attrs:{xs6:"",row:"",wrap:"","justify-center":""}},[s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Father Occupation"},on:{focus:function(t){return e.dismiss()}},model:{value:e.father_occupation,callback:function(t){e.father_occupation=t},expression:"father_occupation"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Mother Occupation"},on:{focus:function(t){return e.dismiss()}},model:{value:e.mother_occupation,callback:function(t){e.mother_occupation=t},expression:"mother_occupation"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:"","justify-space-between":""}},[s("v-radio-group",{attrs:{row:""},on:{click:function(t){return e.dismiss()}},model:{value:e.transport,callback:function(t){e.transport=t},expression:"transport"}},[s("v-radio",{attrs:{label:"Bus User",value:"bus_user"}}),e._v(" "),s("v-radio",{attrs:{label:"Walker",value:"walker"}})],1)],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Bus Route"},on:{focus:function(t){return e.dismiss()}},model:{value:e.bus_rout,callback:function(t){e.bus_rout=t},expression:"bus_rout"}})],1),e._v(" "),s("v-flex",{attrs:{xs6:"",sm6:"",md2:""}},[s("v-text-field",{attrs:{label:"Bus Stop"},on:{focus:function(t){return e.dismiss()}},model:{value:e.bus_stop,callback:function(t){e.bus_stop=t},expression:"bus_stop"}})],1)],1),e._v(" "),s("v-layout",{attrs:{xs4:"",row:"",wrap:"","justify-center":""}},[s("v-flex",{attrs:{xs6:"",sm6:"",md10:""}},[s("v-text-field",{attrs:{label:"Address"},on:{focus:function(t){return e.dismiss()}},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)],1),e._v(" "),s("v-layout",{attrs:{xs4:"",row:"",wrap:"","justify-space-around":""}},[s("div",{staticClass:"text-xs-center"},[s("v-btn",{attrs:{loading:e.loading,disabled:e.loading,color:"info"},on:{click:[function(t){e.loader="loading"},function(t){return e.validate_entries()}]}},[e._v("\n              Add Student\n              "),s("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[s("v-icon",{attrs:{light:""}},[e._v("cached")])],1)])],1)]),e._v(" "),s("v-alert",{attrs:{value:e.showDismissibleAlert,type:e.alert_type}},[e._v(e._s(e.alert_message))])],1)],1),e._v(" "),s("v-dialog",{attrs:{persistent:"","max-width":"360"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v(e._s(e.caption))]),e._v(" "),s("v-card-text",[e._v(e._s(e.alert_message))]),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(t){return e.add_student()}}},[e._v("OK")]),e._v(" "),s("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(t){e.confirm=!1}}},[e._v("Cancel")])],1)],1)],1)],1)],1)},staticRenderFns:[]},E=s("VU/8")(D,$,!1,null,null,null).exports;a.default.use(d.a);var C=new d.a({routes:[{path:"/",name:"App",component:_},{path:"/dashboard",name:"Dashboard",component:m},{path:"/student_search",name:"StudentSearch",component:x},{path:"/fee_payment",name:"FeePayment",component:v},{path:"/correction",name:"Coprrection",component:S},{path:"/add_student",name:"add_student",component:E}]}),T=s("uUlv");a.default.use(T.a);var P=new T.a.Store({state:{server_ip:"https://www.classupclient.com",logged_status:!1,logged_user:"unknown",user_name:"unknown",user_type:"unknown",school_id:0,student_id:"unknown",student_name:"unknown",student_class:"unknown",parent:"unknown",school_name:"ClassUp",coming_from:"unknown",adm_fee:!1},mutations:{SET_LOGGED_STATUS:function(e,t){e.logged_status=t},SET_USER:function(e,t){e.logged_user=t},SET_USER_NAME:function(e,t){e.user_name=t},SET_USER_TYPE:function(e,t){e.user_type=t},SET_ID:function(e,t){e.school_id=t},SET_SCHOOL_NAME:function(e,t){e.school_name=t},SET_STUDENT_ID:function(e,t){e.student_id=t},SET_STUDENT_NAME:function(e,t){e.student_name=t},SET_STUDENT_CLASS:function(e,t){e.student_class=t},SET_PARENT:function(e,t){e.parent=t},SET_ADM_FEE:function(e,t){e.adm_fee=t},SET_COMING_STATUS:function(e,t){e.coming_from=t}},actions:{set_logged_status:function(e,t){e.commit("SET_LOGGED_STATUS",t)},set_user:function(e,t){e.commit("SET_USER",t)},set_user_name:function(e,t){e.commit("SET_USER_NAME",t)},set_user_type:function(e,t){e.commit("SET_USER_TYPE",t)},set_id:function(e,t){e.commit("SET_ID",t)},set_school_name:function(e,t){e.commit("SET_SCHOOL_NAME",t)},set_student_id:function(e,t){e.commit("SET_STUDENT_ID",t)},set_student_name:function(e,t){e.commit("SET_STUDENT_NAME",t)},set_student_class:function(e,t){e.commit("SET_STUDENT_CLASS",t)},set_parent:function(e,t){e.commit("SET_PARENT",t)},set_adm_fee:function(e,t){e.commit("SET_ADM_FEE",t)},set_coming_status:function(e,t){e.commit("SET_COMING_STATUS",t)}},getters:{get_logged_status:function(e){return e.logged_status},get_logged_user:function(e){return e.logged_user},get_user_name:function(e){return e.user_name},get_user_type:function(e){return e.user_type},get_school_id:function(e){return e.school_id},get_school_name:function(e){return e.school_name},get_server_ip:function(e){return e.server_ip},get_student_id:function(e){return e.student_id},get_student_name:function(e){return e.student_name},get_student_class:function(e){return e.student_class},get_parent:function(e){return e.parent},get_adm_fee:function(e){return e.adm_fee},get_coming_from:function(e){return e.coming_from}}}),N=s("3EgV"),U=s.n(N);s("7zck");a.default.use(U.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:C,store:P,components:{App:_},template:"<App/>"})},ZSVR:function(e,t){},"dU/q":function(e,t){},uKVr:function(e,t){},zoC0:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_axios__=__webpack_require__("mtWM"),__WEBPACK_IMPORTED_MODULE_0_axios___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_axios__);__webpack_exports__.a={name:"FeePayment",data:function(){return{school_id:"",student_id:"",student_erp_id:"",the_class:"",student_name:"",parent:"",alert_message:"",heads:[],headers:[{text:"Head",align:"left",sortable:!1,value:"name"},{text:"Amount",value:"reg_no"},{text:"Discount (%)",value:0},{text:"Dicsount (Amount)",value:0},{text:"Net payable",value:0}],due_till_now:0,transport_fee:0,paid_till_date:0,dues:0,delay:"No Delay",late_fee:0,one_time:0,discount_given:0,waiver:0,actual_paid:0,payment_mode:"",cheque_no:"N/A",bank:"N/A",showDismissibleAlert:!1,alert_type:"error",confirm:!1,caption:"",allow_edit:!1,max25chars:function(e){return e.length<=30||"Input too long!"}}},computed:{previous_due:function previous_due(){var self=this;return this.dues+eval(this.due_till_now)},due_this_term:function due_this_term(){var self=this,amt=0;console.log(self.heads);for(var i=0;i<self.heads.length;i++)console.log("head value = ",self.heads[i].head),"N/A"!=self.heads[i].amount&&(amt+=eval(self.heads[i].net_payable));return console.log("amount as computed = ",amt),amt},net_payable:function net_payable(){var self=this;return this.due_this_term+eval(self.late_fee)+eval(self.one_time)+eval(this.previous_due)-this.waiver-this.paid_till_date},balance:function(){return this.net_payable-this.actual_paid}},mounted:function(){var e=this,t=this.$store.getters.get_school_id,s=this.$store.getters.get_student_id;this.student_name=this.$store.getters.get_student_name,this.parent=this.$store.getters.get_parent;var a=this.$store.getters.get_server_ip.concat("/fee_processing/fee_details/");__WEBPACK_IMPORTED_MODULE_0_axios___default.a.get(a,{params:{school_id:t,student_id:s}}).then(function(t){var s;for(e.student_erp_id=t.data.reg_no,e.the_class=t.data.current_class,s=0;s<t.data.heads.length;s++){var a={};"N/A"!=t.data.heads[s].amount&&(a.head=t.data.heads[s].head,a.amount=t.data.heads[s].amount,a.discount_perc=0,a.discount_amt=0,a.net_payable=t.data.heads[s].amount,e.heads.push(a),"Transportation Fee"==a.head&&(e.transport_fee=a.amount,console.log("transportation fee = ",e.transport_fee)))}e.due_till_now=t.data["Due till now"],console.log(e.due_till_now),e.dues=t.data["Previous Outstanding"],e.paid_till_date=t.data["Paid till date"],e.delay=t.data["Days Delay"]+" Days/"+t.data["Weeks Delay"]+" Weeks"}).catch(function(e){console.log(e)})},methods:{click:function(){},apply_discount:function(e){console.log("inside apply_discount"),console.log("discount to be given = ",e.discount_perc);var t=this.heads.indexOf(e),s=this.heads[t].amount;console.log("original amount = ",s);var a=s*e.discount_perc/100;this.heads[t].discount_amt=a,console.log("discount = ",a);var n=s-a;console.log("discounted amount = ",n),this.heads[t].net_payable=n,this.discount_given+=a},update_fee:function(e){console.log("inside update_fee");var t=this.heads.indexOf(e);this.heads[t].net_payable=e.amount},validate_fee:function(){if(0==this.actual_paid)return this.alert_message="Please enter actual fees paid",void(this.showDismissibleAlert=!0);if(""==this.payment_mode)return this.alert_message="Please select a Payment mode",void(this.showDismissibleAlert=!0);if("cheque"==this.payment_mode){if(console.log("payment mode cheque"),"N/A"==this.cheque_no||""==this.cheque_no)return this.cheque_no="",this.alert_message="Please enter cheque number",void(this.showDismissibleAlert=!0);if("N/A"==this.bank||""==this.bank)return this.bank="",this.alert_message="Please enter Bank Name",void(this.showDismissibleAlert=!0)}if(this.actual_paid<this.net_payable){console.log("short fee case");var e=this.balance;this.caption="Short Fees Alert",this.alert_message="Fees paid is less than Net payable by "+e,this.alert_message+=". This will be added to the Balance. Do you want to proceed?",this.confirm=!0}if(this.actual_paid>this.net_payable){console.log("excess fee case");var t=this.actual_paid-this.net_payable;this.caption="Excess Fees Alert",this.alert_message="Fees paid is more than Net payable by "+t,this.alert_message+=". This will be adjusted in future payments. Do you want to proceed?",this.confirm=!0}this.actual_paid==this.net_payable&&(this.caption="Confirm fee submission",this.alert_message="Are you sure you want to accept this fee? ",this.confirm=!0)},close:function(){console.log("Dialog closed")},fee_history:function(){var e=this,t=this.$store.getters.get_server_ip,s=this.$store.getters.get_school_id,a=this.student_erp_id,n=t.concat("/fee_processing/fee_history_download/?school_id=",s,"&reg_no=",a);__WEBPACK_IMPORTED_MODULE_0_axios___default.a.get(n,{headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},responseType:"arraybuffer"}).then(function(t){console.log(t);var s=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=s;var n=e.$store.getters.get_student_name+"_fee_history.xlsx";a.setAttribute("download",n),document.body.appendChild(a),a.click(),e.waiting=!1,confirm("Fee Payment History Downloaded")}).catch(function(e){console.log(e)}).then(function(){})},process_fee:function(){var e=this;console.log("inside process fees"),this.confirm=!1;var t=this.$store.getters.get_server_ip,s=this.$store.getters.get_school_id,a=t.concat("/fee_processing/process_fee/",s,"/");__WEBPACK_IMPORTED_MODULE_0_axios___default.a.post(a,{reg_no:this.student_erp_id,heads:this.heads,due_this_term:this.due_this_term,previous_due:this.previous_due,fine:this.late_fee,one_time:this.one_time,discount:this.discount_given,waiver:this.waiver,net_payable:this.net_payable,actual_paid:this.actual_paid,balance:this.balance,mode:this.payment_mode,cheque_no:this.cheque_no,bank:this.bank}).then(function(t){console.log(t);var s=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=s;var n=e.student_name+" ("+e.student_erp_id+")";n+="_fee_receipt.pdf",a.setAttribute("download",n),document.body.appendChild(a),a.click(),confirm("Fees successfully deposited"),e.$router.replace("/student_search")}).catch(function(e){console.log(e)}).then(function(){})},dismiss:function(){this.showDismissibleAlert=!1}}}}},["NHnr"]);
//# sourceMappingURL=app.73980e377471fb2b4939.js.map